"use client";

import { AlertCircle, Building, Check, ChevronRight, Cloud, Globe, Network, Server, Smartphone, Target, Zap } from 'lucide-react';
import { FormEvent, ReactNode, useState } from 'react';

interface TestType {
  id: string;
  icon: ReactNode;
  title: string;
  description: string;
  highlighted?: boolean;
}

interface SizeOption {
  id: string;
  title: string;
  description: string;
  details: string;
  price: string;
  popular?: boolean;
}

interface ExtraOption {
  id: string;
  label: string;
  description: string;
  price: string;
  free?: boolean;
}

interface FormData {
  fullName: string;
  companyName: string;
  email: string;
  phone: string;
  companySize: string;
  additionalInfo: string;
  agreed: boolean;
}

interface FormErrors {
  fullName?: string;
  companyName?: string;
  email?: string;
  phone?: string;
  agreed?: string;
}

const PentestBookingForm = () => {
  const [currentStep, setCurrentStep] = useState<number>(1);
  const [selectedTest, setSelectedTest] = useState<string>('');
  const [selectedSize, setSelectedSize] = useState<string>('');
  const [selectedExtras, setSelectedExtras] = useState<string[]>(['free-retest']);
  const [formData, setFormData] = useState<FormData>({
    fullName: '',
    companyName: '',
    email: '',
    phone: '',
    companySize: '',
    additionalInfo: '',
    agreed: false
  });
  const [errors, setErrors] = useState<FormErrors>({});
  const [isSubmitting, setIsSubmitting] = useState<boolean>(false);

  const testTypes: TestType[] = [
    {
      id: 'infrastructure',
      icon: <Server className="w-8 h-8" />,
      title: 'Infrastructure Pentest',
      description: 'Network, servers, and internal systems'
    },
    {
      id: 'web-app',
      icon: <Globe className="w-8 h-8" />,
      title: 'Web Application Pentest',
      description: 'Web apps, portals, and SaaS platforms'
    },
    {
      id: 'mobile-app',
      icon: <Smartphone className="w-8 h-8" />,
      title: 'Mobile App Pentest',
      description: 'iOS and Android applications'
    },
    {
      id: 'api',
      icon: <Zap className="w-8 h-8" />,
      title: 'API Security Test',
      description: 'REST, GraphQL, and SOAP APIs'
    },
    {
      id: 'cloud',
      icon: <Cloud className="w-8 h-8" />,
      title: 'Cloud/DevOps Assessment',
      description: 'AWS, Azure, GCP configurations'
    },
    {
      id: 'network-audit',
      icon: <Network className="w-8 h-8" />,
      title: 'Network Audit',
      description: 'Network architecture and segmentation'
    },
    {
      id: 'red-team',
      icon: <Target className="w-8 h-8" />,
      title: 'Red Teaming',
      description: 'Advanced attack simulation'
    },
    {
      id: 'sme-package',
      icon: <Building className="w-8 h-8" />,
      title: 'SME Pentest Packages',
      description: 'Bundled solutions for small businesses',
      highlighted: true
    }
  ];

  const sizes: SizeOption[] = [
    {
      id: 'small',
      title: 'Small',
      description: 'Ideal for startups and small businesses',
      details: 'Up to 10 targets • 1 week testing • Standard report',
      price: '€3,500'
    },
    {
      id: 'medium',
      title: 'Medium',
      description: 'Perfect for growing companies',
      details: 'Up to 50 targets • 2 weeks testing • Detailed report',
      price: '€8,500',
      popular: true
    },
    {
      id: 'large',
      title: 'Large',
      description: 'For enterprise organizations',
      details: 'Unlimited targets • 3+ weeks • Executive + Technical reports',
      price: '€18,000'
    }
  ];

  const extras: ExtraOption[] = [
    { id: 'free-retest', label: 'Free Retest', description: 'One complimentary retest after remediation', price: 'FREE', free: true },
    { id: 'priority', label: 'Priority Delivery', description: 'Report delivered 50% faster', price: '+€1,500' },
    { id: 'executive', label: 'Executive Report', description: 'Board-level summary presentation', price: '+€800' },
    { id: 'support', label: '24/7 Support', description: 'Round-the-clock communication during testing', price: '+€1,200' },
    { id: 'compliance', label: 'Compliance Mapping', description: 'Map findings to ISO 27001, SOC 2, PCI DSS', price: '+€1,000' }
  ];

  const companySizes = [
    '1-10 employees',
    '11-50 employees',
    '51-200 employees',
    '201-500 employees',
    '500+ employees'
  ];

  const calculatePrice = (): number => {
    let basePrice = 0;
    if (selectedSize === 'small') basePrice = 3500;
    if (selectedSize === 'medium') basePrice = 8500;
    if (selectedSize === 'large') basePrice = 18000;

    let extrasPrice = 0;
    if (selectedExtras.includes('priority')) extrasPrice += 1500;
    if (selectedExtras.includes('executive')) extrasPrice += 800;
    if (selectedExtras.includes('support')) extrasPrice += 1200;
    if (selectedExtras.includes('compliance')) extrasPrice += 1000;

    return basePrice + extrasPrice;
  };

  const formatPrice = (price: number): string => {
    return `€${price.toLocaleString()}`;
  };

  const toggleExtra = (id: string): void => {
    if (id === 'free-retest') return;
    setSelectedExtras(prev =>
      prev.includes(id) ? prev.filter(e => e !== id) : [...prev, id]
    );
  };

  const handleNext = (): void => {
    if (currentStep < 3) setCurrentStep(currentStep + 1);
  };

  const handleBack = (): void => {
    if (currentStep > 1) setCurrentStep(currentStep - 1);
  };

  const validateStep1 = (): boolean => {
    if (!selectedTest) {
      alert('Please select a test type to continue');
      return false;
    }
    return true;
  };

  const validateStep2 = (): boolean => {
    if (!selectedSize) {
      alert('Please select a test size to continue');
      return false;
    }
    return true;
  };

  const validateStep3 = (): FormErrors => {
    const newErrors: FormErrors = {};

    if (!formData.fullName.trim()) newErrors.fullName = 'Full name is required';
    if (!formData.companyName.trim()) newErrors.companyName = 'Company name is required';
    if (!formData.email.trim()) {
      newErrors.email = 'Email is required';
    } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(formData.email)) {
      newErrors.email = 'Please enter a valid email address';
    }
    if (!formData.phone.trim()) {
      newErrors.phone = 'Phone number is required';
    } else if (!/^[\+]?[1-9][\d\s\-\(\)\.]{8,}$/.test(formData.phone.replace(/\s/g, ''))) {
      newErrors.phone = 'Please enter a valid phone number';
    }
    if (!formData.agreed) newErrors.agreed = 'You must agree to the terms';

    return newErrors;
  };

  const handleStepNext = (): void => {
    if (currentStep === 1 && !validateStep1()) return;
    if (currentStep === 2 && !validateStep2()) return;
    handleNext();
  };

  const handleSubmit = async (e: FormEvent): Promise<void> => {
    e.preventDefault();

    const validationErrors = validateStep3();
    if (Object.keys(validationErrors).length > 0) {
      setErrors(validationErrors);
      return;
    }

    setIsSubmitting(true);
    setErrors({});

    try {
      const submissionData = {
        selectedTest,
        selectedSize,
        selectedExtras,
        totalPrice: calculatePrice(),
        ...formData
      };

      console.log('Form submitted:', submissionData);

      // Simulate API call
      await new Promise(resolve => setTimeout(resolve, 1000));

      alert('Request submitted successfully! Our team will contact you within 24 hours.');

      // Reset form
      setCurrentStep(1);
      setSelectedTest('');
      setSelectedSize('');
      setSelectedExtras(['free-retest']);
      setFormData({
        fullName: '',
        companyName: '',
        email: '',
        phone: '',
        companySize: '',
        additionalInfo: '',
        agreed: false
      });
    } catch (error) {
      console.error('Submission error:', error);
      alert('There was an error submitting your request. Please try again.');
    } finally {
      setIsSubmitting(false);
    }
  };

  const handleInputChange = (field: keyof FormData, value: string | boolean): void => {
    setFormData(prev => ({ ...prev, [field]: value }));
    // Clear error when user starts typing
    if (errors[field as keyof FormErrors]) {
      setErrors(prev => ({ ...prev, [field]: undefined }));
    }
  };

  return (
    <div className="min-h-screen bg-gray-50 p-4 sm:p-6 md:p-8">
      <div className="max-w-7xl mx-auto">
        <div className="flex flex-col lg:flex-row gap-4 sm:gap-6">
          {/* Sidebar - Responsive */}
          <div className="lg:w-64 xl:w-80">
            <div className="bg-white rounded-lg shadow-sm overflow-hidden">
              {/* Step 1 */}
              <div className={`p-3 sm:p-4 ${currentStep === 1 ? 'bg-black text-white' : currentStep > 1 ? 'bg-white' : 'bg-white'}`}>
                <div className="flex items-center gap-2 sm:gap-3">
                  <div className={`w-6 h-6 sm:w-7 sm:h-7 lg:w-8 lg:h-8 rounded-full flex items-center justify-center flex-shrink-0 ${currentStep > 1 ? 'bg-black text-white' : currentStep === 1 ? 'bg-red-600' : 'bg-gray-200'}`}>
                    {currentStep > 1 ? <Check className="w-3 h-3 sm:w-4 sm:h-4" /> : '1'}
                  </div>
                  <div>
                    <div className={`font-semibold text-sm sm:text-base ${currentStep === 1 ? 'text-white' : 'text-black'}`}>
                      Type of Test
                    </div>
                    <div className={`text-xs sm:text-sm ${currentStep === 1 ? 'text-gray-300' : 'text-gray-500'}`}>
                      Choose your service
                    </div>
                  </div>
                </div>
              </div>

              {/* Step 2 */}
              <div className={`p-3 sm:p-4 ${currentStep === 2 ? 'bg-black text-white' : currentStep > 2 ? 'bg-white' : 'bg-white'}`}>
                <div className="flex items-center gap-2 sm:gap-3">
                  <div className={`w-6 h-6 sm:w-7 sm:h-7 lg:w-8 lg:h-8 rounded-full flex items-center justify-center flex-shrink-0 ${currentStep > 2 ? 'bg-black text-white' : currentStep === 2 ? 'bg-red-600' : 'bg-gray-200 text-gray-500'}`}>
                    {currentStep > 2 ? <Check className="w-3 h-3 sm:w-4 sm:h-4" /> : '2'}
                  </div>
                  <div>
                    <div className={`font-semibold text-sm sm:text-base ${currentStep === 2 ? 'text-white' : currentStep < 2 ? 'text-gray-400' : 'text-black'}`}>
                      Size & Extras
                    </div>
                    <div className={`text-xs sm:text-sm ${currentStep === 2 ? 'text-gray-300' : 'text-gray-500'}`}>
                      Configure your test
                    </div>
                  </div>
                </div>
              </div>

              {/* Step 3 */}
              <div className={`p-3 sm:p-4 ${currentStep === 3 ? 'bg-black text-white' : 'bg-white'}`}>
                <div className="flex items-center gap-2 sm:gap-3">
                  <div className={`w-6 h-6 sm:w-7 sm:h-7 lg:w-8 lg:h-8 rounded-full flex items-center justify-center flex-shrink-0 ${currentStep === 3 ? 'bg-red-600' : 'bg-gray-200 text-gray-500'}`}>
                    3
                  </div>
                  <div>
                    <div className={`font-semibold text-sm sm:text-base ${currentStep === 3 ? 'text-white' : currentStep < 3 ? 'text-gray-400' : 'text-black'}`}>
                      Contact Info
                    </div>
                    <div className={`text-xs sm:text-sm ${currentStep === 3 ? 'text-gray-300' : 'text-gray-500'}`}>
                      Submit your request
                    </div>
                  </div>
                </div>
              </div>
            </div>

            {/* Mobile Progress Indicator */}
            <div className="lg:hidden mt-4">
              <div className="flex items-center justify-center gap-2">
                {[1, 2, 3].map((step) => (
                  <div
                    key={step}
                    className={`w-8 h-2 rounded-full ${currentStep === step ? 'bg-red-600' : currentStep > step ? 'bg-black' : 'bg-gray-300'}`}
                  />
                ))}
              </div>
              <div className="text-center mt-2 text-sm text-gray-600">
                Step {currentStep} of 3
              </div>
            </div>
          </div>

          {/* Main Content */}
          <div className="flex-1">
            <div className="bg-white rounded-lg shadow-sm p-4 sm:p-6 md:p-8">
              {/* Step 1: Select Test Type */}
              {currentStep === 1 && (
                <div>
                  <div className="mb-4 sm:mb-6">
                    <h1 className="text-2xl sm:text-3xl font-bold mb-2">Select Test Type</h1>
                    <p className="text-gray-600 text-sm sm:text-base">
                      Choose the type of security assessment you need. Not sure which one?{' '}
                      <a href="#" className="text-red-600 hover:text-red-700 font-medium inline-flex items-center">
                        <AlertCircle className="inline w-3 h-3 sm:w-4 sm:h-4 mr-1" />
                        Need help choosing?
                      </a>
                    </p>
                  </div>

                  <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 mb-6 sm:mb-8">
                    {testTypes.map((test) => (
                      <button
                        key={test.id}
                        onClick={() => setSelectedTest(test.id)}
                        className={`p-4 sm:p-5 lg:p-6 rounded-lg cursor-pointer border-2 text-left transition-all ${test.highlighted
                          ? selectedTest === test.id
                            ? 'bg-red-600 border-red-600 text-white'
                            : 'bg-black border-black text-white hover:bg-gray-900'
                          : selectedTest === test.id
                            ? 'border-red-600 bg-red-50'
                            : 'border-gray-200 hover:border-gray-300'
                          }`}
                      >
                        <div className={`mb-2 sm:mb-3 ${test.highlighted && selectedTest !== test.id ? 'text-white' : selectedTest === test.id && test.highlighted ? 'text-white' : selectedTest === test.id ? 'text-red-600' : 'text-black'}`}>
                          {test.icon}
                        </div>
                        <h3 className="font-semibold text-sm sm:text-base mb-1">{test.title}</h3>
                        <p className={`text-xs sm:text-sm ${test.highlighted && selectedTest !== test.id ? 'text-gray-300' : selectedTest === test.id && test.highlighted ? 'text-red-100' : selectedTest === test.id ? 'text-gray-700' : 'text-gray-600'}`}>
                          {test.description}
                        </p>
                      </button>
                    ))}
                  </div>

                  <div className="flex justify-end">
                    <button
                      onClick={handleStepNext}
                      disabled={!selectedTest}
                      className="bg-red-600 cursor-pointer text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2 text-sm sm:text-base w-full sm:w-auto justify-center"
                    >
                      Next Step <ChevronRight className="w-4 h-4 sm:w-5 sm:h-5" />
                    </button>
                  </div>
                </div>
              )}

              {/* Step 2: Configure Test */}
              {currentStep === 2 && (
                <div>
                  <div className="mb-4 sm:mb-6">
                    <h1 className="text-2xl sm:text-3xl font-bold mb-2">Configure Your Test</h1>
                    <p className="text-gray-600 text-sm sm:text-base">Select the size that fits your needs and add any extras</p>
                  </div>

                  {/* Test Size */}
                  <div className="mb-6 sm:mb-8">
                    <h2 className="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">Test Size</h2>
                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4">
                      {sizes.map((size) => (
                        <button
                          key={size.id}
                          onClick={() => setSelectedSize(size.id)}
                          className={`p-4 sm:p-5 lg:p-6 rounded-lg cursor-pointer border-2 text-left relative ${size.popular
                            ? selectedSize === size.id
                              ? 'bg-red-600 border-red-600 text-white'
                              : 'bg-black border-black text-white'
                            : selectedSize === size.id
                              ? 'border-red-600 bg-red-50'
                              : 'border-gray-200 hover:border-gray-300'
                            }`}
                        >
                          {size.popular && (
                            <div className="absolute -top-2 sm:-top-3 right-2 sm:right-4 bg-red-600 text-white text-xs font-bold px-2 sm:px-3 py-0.5 sm:py-1 rounded">
                              POPULAR
                            </div>
                          )}
                          <div className={`mb-2 sm:mb-3 ${size.popular && selectedSize !== size.id ? 'text-white' : selectedSize === size.id && size.popular ? 'text-white' : selectedSize === size.id ? 'text-red-600' : 'text-black'}`}>
                            <Building className="w-6 h-6 sm:w-7 sm:h-7 lg:w-8 lg:h-8" />
                          </div>
                          <h3 className="font-semibold text-base sm:text-lg mb-1">{size.title}</h3>
                          <p className={`text-xs mb-2 ${size.popular && selectedSize !== size.id ? 'text-gray-300' : selectedSize === size.id && size.popular ? 'text-red-100' : selectedSize === size.id ? 'text-gray-700' : 'text-gray-600'}`}>
                            {size.description}
                          </p>
                          <p className={`text-xs mb-2 sm:mb-3 ${size.popular && selectedSize !== size.id ? 'text-gray-400' : selectedSize === size.id && size.popular ? 'text-red-200' : selectedSize === size.id ? 'text-gray-600' : 'text-gray-500'}`}>
                            {size.details}
                          </p>
                          <p className="text-xl sm:text-2xl font-bold">{size.price}</p>
                        </button>
                      ))}
                    </div>
                  </div>

                  {/* Add-ons & Extras */}
                  <div className="mb-6 sm:mb-8">
                    <h2 className="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">Add-ons & Extras</h2>
                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
                      {extras.map((extra) => (
                        <button
                          key={extra.id}
                          onClick={() => toggleExtra(extra.id)}
                          disabled={extra.free}
                          className={`p-3 sm:p-4 rounded-lg border-2 text-left flex items-start gap-2 sm:gap-3 ${selectedExtras.includes(extra.id)
                            ? extra.free
                              ? 'border-red-600 bg-red-50'
                              : 'border-red-600 bg-white'
                            : 'border-gray-200 hover:border-gray-300'
                            } ${extra.free ? 'cursor-default' : 'cursor-pointer'}`}
                        >
                          <div className={`w-4 h-4 sm:w-5 sm:h-5 rounded border-2 flex items-center justify-center flex-shrink-0 mt-0.5 ${selectedExtras.includes(extra.id)
                            ? 'bg-red-600 border-red-600'
                            : 'border-gray-300'
                            }`}>
                            {selectedExtras.includes(extra.id) && (
                              <Check className="w-2 h-2 sm:w-3 sm:h-3 text-white" />
                            )}
                          </div>
                          <div className="flex-1">
                            <div className="flex items-center justify-between mb-1">
                              <h3 className="font-semibold text-sm sm:text-base">{extra.label}</h3>
                              <span className={`font-semibold text-sm sm:text-base ${extra.free ? 'text-green-600' : 'text-gray-900'}`}>
                                {extra.price}
                              </span>
                            </div>
                            <p className="text-xs sm:text-sm text-gray-600">{extra.description}</p>
                          </div>
                        </button>
                      ))}
                    </div>
                  </div>

                  {/* Estimated Price */}
                  <div className="bg-black text-white p-4 sm:p-6 rounded-lg mb-4 sm:mb-6">
                    <div className="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0">
                      <div>
                        <h3 className="text-base sm:text-lg font-semibold mb-1">Estimated Price</h3>
                        <p className="text-xs sm:text-sm text-gray-400">Final price may vary based on specific requirements</p>
                      </div>
                      <div className="text-2xl sm:text-3xl lg:text-4xl font-bold text-red-500">
                        {formatPrice(calculatePrice())}
                      </div>
                    </div>
                  </div>

                  <div className="flex flex-col sm:flex-row justify-between gap-3 sm:gap-0">
                    <button
                      onClick={handleBack}
                      className="border-2 border-gray-300 cursor-pointer text-gray-700 px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold hover:border-gray-400 text-sm sm:text-base order-2 sm:order-1"
                    >
                      ← Back
                    </button>
                    <button
                      onClick={handleStepNext}
                      disabled={!selectedSize}
                      className="bg-red-600 text-white cursor-pointer px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2 text-sm sm:text-base justify-center order-1 sm:order-2"
                    >
                      Next Step <ChevronRight className="w-4 h-4 sm:w-5 sm:h-5" />
                    </button>
                  </div>
                </div>
              )}

              {/* Step 3: Contact Information */}
              {currentStep === 3 && (
                <div>
                  <div className="mb-4 sm:mb-6">
                    <h1 className="text-2xl sm:text-3xl font-bold mb-2">Contact Information</h1>
                    <p className="text-gray-600 text-sm sm:text-base">Tell us about yourself so we can prepare a customized proposal</p>
                  </div>

                  <form onSubmit={handleSubmit}>
                    <div className="space-y-3 sm:space-y-4 mb-4 sm:mb-6">
                      <div>
                        <label className="block text-sm font-semibold mb-1 sm:mb-2">
                          Full Name *
                        </label>
                        <input
                          type="text"
                          placeholder="John Doe"
                          value={formData.fullName}
                          onChange={(e) => handleInputChange('fullName', e.target.value)}
                          className={`w-full px-3 sm:px-4 py-2 sm:py-3 border rounded-lg focus:outline-none focus:border-red-600 text-sm sm:text-base ${errors.fullName ? 'border-red-500' : 'border-gray-300'}`}
                          required
                        />
                        {errors.fullName && (
                          <p className="text-red-500 text-xs mt-1">{errors.fullName}</p>
                        )}
                      </div>

                      <div>
                        <label className="block text-sm font-semibold mb-1 sm:mb-2">
                          Company Name *
                        </label>
                        <input
                          type="text"
                          placeholder="Acme Corporation"
                          value={formData.companyName}
                          onChange={(e) => handleInputChange('companyName', e.target.value)}
                          className={`w-full px-3 sm:px-4 py-2 sm:py-3 border rounded-lg focus:outline-none focus:border-red-600 text-sm sm:text-base ${errors.companyName ? 'border-red-500' : 'border-gray-300'}`}
                          required
                        />
                        {errors.companyName && (
                          <p className="text-red-500 text-xs mt-1">{errors.companyName}</p>
                        )}
                      </div>

                      <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
                        <div>
                          <label className="block text-sm font-semibold mb-1 sm:mb-2">
                            Work Email *
                          </label>
                          <input
                            type="email"
                            placeholder="john@acme.com"
                            value={formData.email}
                            onChange={(e) => handleInputChange('email', e.target.value)}
                            className={`w-full px-3 sm:px-4 py-2 sm:py-3 border rounded-lg focus:outline-none focus:border-red-600 text-sm sm:text-base ${errors.email ? 'border-red-500' : 'border-gray-300'}`}
                            required
                          />
                          {errors.email && (
                            <p className="text-red-500 text-xs mt-1">{errors.email}</p>
                          )}
                        </div>

                        <div>
                          <label className="block text-sm font-semibold mb-1 sm:mb-2">
                            Phone Number *
                          </label>
                          <input
                            type="tel"
                            placeholder="+49 123 456 7890"
                            value={formData.phone}
                            onChange={(e) => handleInputChange('phone', e.target.value)}
                            className={`w-full px-3 sm:px-4 py-2 sm:py-3 border rounded-lg focus:outline-none focus:border-red-600 text-sm sm:text-base ${errors.phone ? 'border-red-500' : 'border-gray-300'}`}
                            required
                          />
                          {errors.phone && (
                            <p className="text-red-500 text-xs mt-1">{errors.phone}</p>
                          )}
                        </div>
                      </div>

                      <div>
                        <label className="block text-sm font-semibold mb-1 sm:mb-2">
                          Company Size (Optional)
                        </label>
                        <div className="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2 sm:gap-3">
                          {companySizes.map((size) => (
                            <button
                              key={size}
                              type="button"
                              onClick={() => handleInputChange('companySize', size)}
                              className={`px-2 sm:px-3 py-2 sm:py-3 border rounded-lg text-xs sm:text-sm font-medium transition-colors ${formData.companySize === size
                                ? 'border-red-600 bg-red-50 text-red-600'
                                : 'border-gray-300 hover:border-gray-400'
                                }`}
                            >
                              {size}
                            </button>
                          ))}
                        </div>
                      </div>

                      <div>
                        <label className="block text-sm font-semibold mb-1 sm:mb-2">
                          Additional Information (Optional)
                        </label>
                        <textarea
                          placeholder="Tell us about your security requirements, timeline, or any specific concerns..."
                          value={formData.additionalInfo}
                          onChange={(e) => handleInputChange('additionalInfo', e.target.value)}
                          className="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-red-600 text-sm sm:text-base min-h-[80px] sm:min-h-[100px]"
                        />
                      </div>

                      <div className="flex items-start gap-2 sm:gap-3">
                        <input
                          type="checkbox"
                          id="agree"
                          checked={formData.agreed}
                          onChange={(e) => handleInputChange('agreed', e.target.checked)}
                          className="mt-1 w-4 h-4 sm:w-5 sm:h-5 accent-red-600 flex-shrink-0"
                          required
                        />
                        <label htmlFor="agree" className="text-xs sm:text-sm text-gray-700">
                          I agree to be contacted by Sudo Secure regarding this penetration testing request. I understand that this is a preliminary inquiry and final pricing will be determined after a detailed scoping call.
                        </label>
                      </div>
                      {errors.agreed && (
                        <p className="text-red-500 text-xs">{errors.agreed}</p>
                      )}
                    </div>

                    <div className="bg-gray-50 border-l-2 sm:border-l-4 border-red-600 p-3 sm:p-4 mb-4 sm:mb-6">
                      <h3 className="font-semibold mb-1 sm:mb-2 text-sm sm:text-base">What happens next?</h3>
                      <ul className="space-y-1 text-xs sm:text-sm text-gray-700">
                        <li>• Our security team will review your request within 24 hours</li>
                        <li>• We&apos;ll schedule a scoping call to understand your specific needs</li>
                        <li>• You&apos;ll receive a detailed proposal with timeline and final pricing</li>
                      </ul>
                    </div>

                    <div className="flex flex-col sm:flex-row justify-between gap-3 sm:gap-0">
                      <button
                        type="button"
                        onClick={handleBack}
                        className="border-2 border-gray-300 cursor-pointer text-gray-700 px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold hover:border-gray-400 text-sm sm:text-base order-2 sm:order-1"
                      >
                        ← Back
                      </button>
                      <button
                        type="submit"
                        disabled={isSubmitting}
                        className="bg-red-600 cursor-pointer text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2 text-sm sm:text-base justify-center order-1 sm:order-2"
                      >
                        {isSubmitting ? 'Submitting...' : 'Submit Request'}
                        {!isSubmitting && <ChevronRight className="w-4 h-4 sm:w-5 sm:h-5" />}
                      </button>
                    </div>
                  </form>
                </div>
              )}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default PentestBookingForm;